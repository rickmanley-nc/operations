---
- hosts: satellite
  name: Deploy and Configure Satellite 6.2 on LibVirt (localhost)
  roles:
   - satellite-deploy-vm
   - satellite-install

# Need to document process:
# 1. Create sat-isolated network with x.x.126.0/24 subnet
# 2. Create VM: 4 vCPU, 12228 GB RAM, 125 GB Storage, RHEL 7.3 - place on sat-isolated network with the following static ip info:
# Configure static networking as
# IP -  192.168.126.2
# Netmask - 255.255.255.0
# Gateway - 192.168.126.1
# DNS - 192.168.126.1 (note: this is temporary. After we install Satellite, we'll change this to the IP of the Satellite as it will be running DNS)
# 3. Ensure partition layout has just "/" at 120 GiB, "swap" at 4096 MiB, and "/boot" at 250 MiB
# 4. Clone disk/image/vm as gold image.
# 5. build new image...
# virsh suspend satellite-test
# virt-clone --connect qemu:///system --original satellite-test --name satellite-test-clone --file /home/rnelson/Images/satellite-test-clone.qcow2
# virsh resume satellite-test
# virt-sysprep -d satellite-test-clone --hostname satellite.example.com --root-password password:redhat
# cp /home/rnelson/Images/satellite-test-clone.qcow2 /home/rnelson/Images/original/GOLD-satellite.qcow2
# cp /home/rnelson/Images/original/GOLD-satellite.qcow2 /home/rnelson/Images/satellite-test-gold.qcow2
# virt-install --name satellite-new --ram 12228 --vcpus 4 --network bridge=virbr3 --disk path=/home/rnelson/Images/satellite-test-gold.qcow2 --import --noautoconsole
# virsh start satellite-test-clone
# 6. 
